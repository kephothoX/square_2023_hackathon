<app-header></app-header>
<section>
  <mat-card>
    <mat-card-content *ngIf="userData">

      <form [formGroup]="newCardForm" (ngSubmit)="onSubmit()">
       <mat-form-field appearance="outline" class="p-1">
          <mat-label>Cardholders Name </mat-label>
          <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
          <mat-hint align="end"></mat-hint>
          <input type="text" matInput  formControlName = "cardholder_name" placeholder="Cardholdr's Name">
        </mat-form-field>
        <div class="spacer"></div>

        <mat-accordion class="matAccordion">
          <mat-expansion-panel hideToggle>
            <mat-expansion-panel-header>
              <mat-panel-title>
                <h2 class="centered">Billing Address</h2>
              </mat-panel-title>
            </mat-expansion-panel-header>

            <div formGroupName = "billingAddress">
              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Address Line 1 </mat-label>
                <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
                <mat-hint align="end"></mat-hint>
                <input type="text" matInput  formControlName = "address_line_1" [(ngModel)]="userData.address.address_line_1">
              </mat-form-field>
              <div class="spacer"></div>

              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Address Line 2 </mat-label>
                <mat-hint align="end"></mat-hint>
                <input type="text" matInput formControlName="address_line_2" [(ngModel)]="userData.address.address_line_2">
                <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
              </mat-form-field>
              <div class="spacer"></div>

              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Locality</mat-label>
                <mat-hint align="end"></mat-hint><mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
                <input type="text" matInput formControlName="locality" [(ngModel)]="userData.address.locality">
              </mat-form-field>
              <div class="spacer"></div>

              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Administrative District Level 1</mat-label>
                <mat-hint align="end"></mat-hint>
                <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
                <input type="text" matInput formControlName="administrative_district_level_1" [(ngModel)]="userData.address.administrative_district_level_1">
              </mat-form-field>
              <div class="spacer"></div>

              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Postal Code</mat-label>
                <mat-hint align="end"></mat-hint>
                <mat-icon matPrefix class="material-icons">info_outline</mat-icon>
                <input type="text" matInput formControlName="postal_code" [(ngModel)]="userData.address.postal_code">
              </mat-form-field>
              <div class="spacer"></div>

              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Country</mat-label>
                <mat-hint align="end"></mat-hint>
                <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
                <mat-select formControlName="country">
                  <mat-option *ngFor="let entry of Countries" [value]="entry.Country_Code_1">
                    {{ entry.Country_Name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <div class="spacer"></div>

              <mat-form-field appearance="outline" class="p-1">
                <mat-label>Country</mat-label>
                <mat-hint align="end"></mat-hint><mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
                <input type="tel" matInput  formControlName="country" [(ngModel)]="userData.address.country">
              </mat-form-field>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <div class="spacer"></div>

        <mat-form-field appearance="outline" class="p-1">
          <mat-label>First Name </mat-label>
          <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
          <mat-hint align="end"></mat-hint>
          <input type="text" matInput  formControlName = "first_name" [(ngModel)]="userData.given_name">
        </mat-form-field>
        <div class="spacer"></div>

        <mat-form-field appearance="outline" class="p-1">
          <mat-label>Last Name </mat-label>
          <mat-icon matPrefix  class="material-icons">info_outline</mat-icon>
          <mat-hint align="end"></mat-hint>
          <input type="text" matInput  formControlName = "last_name" [(ngModel)]="userData.family_name">
        </mat-form-field>
        <div class="spacer"></div>

        <mat-form-field appearance="outline" class="p-1">
          <mat-label>Expiry Month</mat-label>
          <mat-hint align="end">Must be a Number Between 1 and 12</mat-hint>
          <mat-icon matPrefix class="material-icons">calendar</mat-icon>
          <input type="number" matInput formControlName="exp_month" placeholder="Expiry Month">
        </mat-form-field>
        <div class="spacer"></div>

        <mat-form-field appearance="outline" class="p-1">
          <mat-label>Expiry Year</mat-label>
          <mat-hint align="end">Must be a 4 Digits Number</mat-hint>
          <mat-icon matPrefix class="material-icons">calendar</mat-icon>
          <input type="number" matInput formControlName="exp_year" placeholder="Expiry Year">
        </mat-form-field>
        <div class="spacer"></div>


        <mat-card-actions class="align-buttons-center">
          <button type="submit" mat-raised-button  [disabled] ="!newCardForm.valid"><mat-icon class="material-icons">add_circle</mat-icon> Add New Card </button>
          <button type="reset" mat-raised-button color="warn" class="text-white"><mat-icon class="material-icons">cancel</mat-icon>Clear</button>
        </mat-card-actions>
      </form>
    </mat-card-content>
  </mat-card>

</section>


